<!DOCTYPE html>
<html>
<head>
  <style>
    hr {
      display: block;
      margin-block-start: 1.5em;
      margin-block-end: 1.5em;
      color: rgb(82, 82, 255);
      border-style: inset;
      border-width: 4px;
    }
    .alert {
      padding: 20px;
      background-color: #35d37c;
      color: white;
      display: none;
    }
    .alertclosebtn {
      margin-left: 15px;
      color: #fff;
      font-weight: bold;
      float: right;
      font-size: 20px;
      line-height: 15px;
      cursor: pointer;
      transition: 0.3s;
    }
    .overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: none;
      justify-content: center;
      align-items: center;
      z-index: 1;
    }
    .popupwindow {
      position: fixed;
      background: white;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      width: 300px;
      text-align: center;
    }
    .close-btn-yes, .close-btn-no {
      background: rgb(59, 78, 165);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
    }
    .enter-btn {
      background: black;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
    }
    .progressContainer {
      background: #8e8e8e;
      width: 400px;
      height: 20px;
      border-radius: 10px;
      overflow: hidden;
      margin: 10px 0;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
      z-index: 9999;
    }
    .progressBar {
      background: rgb(55, 207, 187);
      height: 100%;
      width: 0%;
      transition: width 0.3s ease;
      border-radius: 10px 0 0 10px;
      z-index: 10000;
    }
    h1, h2 { text-align: center; }
    p.big { line-height: 3; }
    .form-question { margin: 20px 0; }
    body { min-height: 100vh; overflow-x: auto; }
  </style>
  <title>CMPM 170 Prototype 2</title>
</head>

<body bgcolor="add8e6">
  <h1 id="mainTitle">Welcome to CMPM 170: Rapid Prototyping</h1>
  <h2 id="subtitle">Please fill out this form below</h2>

  <div class="alert" id="alertBanner">
    <span class="alertclosebtn" onclick="closeAlert()">&times;</span>
    <strong>You closed all the popups!</strong> Time to submit :)
  </div>

  <div class="big" id="formContainer">
    <div class="form-question" id="nameQuestion">
      <b>What is your name?</b>
      <input type="text" placeholder="Type something here..." id="nameInput">
    </div>
    <div class="form-question" id="dateQuestion">
      <b>What is the date?</b>
      <input type="text" placeholder="Type something here..." id="dateInput">
    </div>
    <div class="form-question" id="birthdayQuestion">
      <b>What is your birthday?</b>
      <input type="text" placeholder="Type something here..." id="birthdayInput">
    </div>
    <div class="form-question" id="taQuestion">
      <b>Who is your favorite TA?</b>
      <input type="text" placeholder="Type something here..." id="taInput">
    </div>
  </div>

  <hr id="divider">

  <!-- Popups -->
  <div class="overlay" id="popupOverlay1">
    <div class="popupwindow">
      <h3>Professor Leckman</h3>
      <p>Isn't he a great professor?</p>
      <p><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSkwl0EH615WXSyxyA7s_cPSMJh7JXJ-NZ-EfqPdlQ541SI_SbYu_y3KxxJ-s8Vfp0s13nIsf_uajx0VPx6TQHsX6Co0j3c8PqDxBrYhrWmHQ" width="200" height="200"></p>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay1')">YES!</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay1')">NO!</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay2">
    <div class="popupwindow">
      <h3>WARNING! WARNING! YOU HAVE RECEIVED A VIRUS.</h3>
      <p>You have appeared to have accumulated several viruses. Please download antivirus now</p>
      <p><img src="error.jpg" width="250" height="250" alt="Antivirus Icon"></p>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay2')">DOWNLOAD</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay2')">X</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay3">
    <div class="popupwindow">
      <h3>You have received $1,000,000!!!</h3>
      <p>Kindly accept the cash that has been sent to your account.</p>
      <p><img src="error.jpg" width="250" height="250" alt="Antivirus Icon"></p>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay3')">Accept Cash!!!!</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay3')">X</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay4">
    <div class="popupwindow">
      <h3>Enjoying the website? Please leave a review!</h3>
      <p>Give a rating from 1‚ú∞ to 5‚ú∞ on your satisfaction.</p>
      <p><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSkwl0EH615WXSyxyA7s_cPSMJh7JXJ-NZ-EfqPdlQ541SI_SbYu_y3KxxJ-s8Vfp0s13nIsf_uajx0VPx6TQHsX6Co0j3c8PqDxBrYhrWmHQ" width="200" height="200"></p>
      <button class="close-btn-no" onclick="closePopup('popupOverlay4')">‚ú∞</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay4')">‚ú∞‚ú∞</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay4')">‚ú∞‚ú∞‚ú∞</button>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay4')">‚ú∞‚ú∞‚ú∞‚ú∞</button>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay4')">‚ú∞‚ú∞‚ú∞‚ú∞‚ú∞</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay5">
    <div class="popupwindow">
      <h3>‚ö†Ô∏è Suspicious Download Detected!</h3>
      <p>Your system has detected an unauthorized download attempt.<br>
         Do you wish to <b>install "SuperClean Antivirus 2.0"</b> to fix this issue?</p>
      <p><img src="error.jpg" width="250" height="250" alt="Antivirus Icon"></p>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay5')">Install Now</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay5')">Ignore Warning</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay6">
    <div class="popupwindow">
      <h3>üí∞ Congratulations!</h3>
      <p>You are our <b>1,000,000th visitor!</b><br>
         Click below to claim your <b>FREE iPhone 16 Ultra Pro Max</b> giveaway.</p>
      <p><img src="error.jpg" width="250" height="250" alt="Antivirus Icon"></p>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay6')">Claim Prize üéÅ</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay6')">No Thanks</button>
    </div>
  </div>

  <!-- Okay this is super lame LMAO I just copy and pasted the Popups a few times to get it to work. Sorry skull emoji -->
   <div class="overlay" id="popupOverlay7">
    <div class="popupwindow">
      <h3>Professor Leckman</h3>
      <p>Isn't he a great professor?</p>
      <p><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSkwl0EH615WXSyxyA7s_cPSMJh7JXJ-NZ-EfqPdlQ541SI_SbYu_y3KxxJ-s8Vfp0s13nIsf_uajx0VPx6TQHsX6Co0j3c8PqDxBrYhrWmHQ" width="200" height="200"></p>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay7')">YES!</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay7')">NO!</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay8">
    <div class="popupwindow">
      <h3>WARNING! WARNING! YOU HAVE RECEIVED A VIRUS.</h3>
      <p>You have appeared to have accumulated several viruses. Please download antivirus now</p>
      <p><img src="error.jpg" width="250" height="250" alt="Antivirus Icon"></p>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay8')">DOWNLOAD</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay8')">X</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay9">
    <div class="popupwindow">
      <h3>You have received $1,000,000!!!</h3>
      <p>Kindly accept the cash that has been sent to your account.</p>
      <p><img src="error.jpg" width="250" height="250" alt="Antivirus Icon"></p>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay9')">Accept Cash!!!!</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay9')">X</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay10">
    <div class="popupwindow">
      <h3>Enjoying the website? Please leave a review!</h3>
      <p>Give a rating from 1‚ú∞ to 5‚ú∞ on your satisfaction.</p>
      <p><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSkwl0EH615WXSyxyA7s_cPSMJh7JXJ-NZ-EfqPdlQ541SI_SbYu_y3KxxJ-s8Vfp0s13nIsf_uajx0VPx6TQHsX6Co0j3c8PqDxBrYhrWmHQ" width="200" height="200"></p>
      <button class="close-btn-no" onclick="closePopup('popupOverlay10')">‚ú∞</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay10')">‚ú∞‚ú∞</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay10')">‚ú∞‚ú∞‚ú∞</button>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay10')">‚ú∞‚ú∞‚ú∞‚ú∞</button>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay10')">‚ú∞‚ú∞‚ú∞‚ú∞‚ú∞</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay11">
    <div class="popupwindow">
      <h3>‚ö†Ô∏è Suspicious Download Detected!</h3>
      <p>Your system has detected an unauthorized download attempt.<br>
         Do you wish to <b>install "SuperClean Antivirus 2.0"</b> to fix this issue?</p>
      <p><img src="error.jpg" width="250" height="250" alt="Antivirus Icon"></p>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay11')">Install Now</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay11')">Ignore Warning</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay12">
    <div class="popupwindow">
      <h3>üí∞ Congratulations!</h3>
      <p>You are our <b>1,000,000th visitor!</b><br>
         Click below to claim your <b>FREE iPhone 16 Ultra Pro Max</b> giveaway.</p>
      <p><img src="error.jpg" width="250" height="250" alt="Antivirus Icon"></p>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay12')">Claim Prize üéÅ</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay12')">No Thanks</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay13">
    <div class="popupwindow">
      <h3>Professor Leckman</h3>
      <p>Isn't he a great professor?</p>
      <p><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSkwl0EH615WXSyxyA7s_cPSMJh7JXJ-NZ-EfqPdlQ541SI_SbYu_y3KxxJ-s8Vfp0s13nIsf_uajx0VPx6TQHsX6Co0j3c8PqDxBrYhrWmHQ" width="200" height="200"></p>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay13')">YES!</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay13')">NO!</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay14">
    <div class="popupwindow">
      <h3>WARNING! WARNING! YOU HAVE RECEIVED A VIRUS.</h3>
      <p>You have appeared to have accumulated several viruses. Please download antivirus now</p>
      <p><img src="error.jpg" width="250" height="250" alt="Antivirus Icon"></p>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay14')">DOWNLOAD</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay14')">X</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay15">
    <div class="popupwindow">
      <h3>You have received $1,000,000!!!</h3>
      <p>Kindly accept the cash that has been sent to your account.</p>
      <p><img src="error.jpg" width="250" height="250" alt="Antivirus Icon"></p>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay15')">Accept Cash!!!!</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay15')">X</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay16">
    <div class="popupwindow">
      <h3>Enjoying the website? Please leave a review!</h3>
      <p>Give a rating from 1‚ú∞ to 5‚ú∞ on your satisfaction.</p>
      <p><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSkwl0EH615WXSyxyA7s_cPSMJh7JXJ-NZ-EfqPdlQ541SI_SbYu_y3KxxJ-s8Vfp0s13nIsf_uajx0VPx6TQHsX6Co0j3c8PqDxBrYhrWmHQ" width="200" height="200"></p>
      <button class="close-btn-no" onclick="closePopup('popupOverlay16')">‚ú∞</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay16')">‚ú∞‚ú∞</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay16')">‚ú∞‚ú∞‚ú∞</button>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay16')">‚ú∞‚ú∞‚ú∞‚ú∞</button>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay16')">‚ú∞‚ú∞‚ú∞‚ú∞‚ú∞</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay17">
    <div class="popupwindow">
      <h3>‚ö†Ô∏è Suspicious Download Detected!</h3>
      <p>Your system has detected an unauthorized download attempt.<br>
         Do you wish to <b>install "SuperClean Antivirus 2.0"</b> to fix this issue?</p>
      <p><img src="error.jpg" width="250" height="250" alt="Antivirus Icon"></p>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay17')">Install Now</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay17')">Ignore Warning</button>
    </div>
  </div>

  <div class="overlay" id="popupOverlay18">
    <div class="popupwindow">
      <h3>üí∞ Congratulations!</h3>
      <p>You are our <b>1,000,000th visitor!</b><br>
         Click below to claim your <b>FREE iPhone 16 Ultra Pro Max</b> giveaway.</p>
      <p><img src="error.jpg" width="250" height="250" alt="Antivirus Icon"></p>
      <button class="close-btn-yes" onclick="closePopup('popupOverlay18')">Claim Prize üéÅ</button>
      <button class="close-btn-no" onclick="closePopup('popupOverlay18')">No Thanks</button>
    </div>
  </div>
  
  <!-- Progress -->
  <div class="progressContainer">
        <div id="progressBar" class="progressBar"></div>
    </div>
  <button class="enter-btn" id="enterButton" onclick="openRandomPopup(); showAlert(); startBgm()">Enter</button>

  <!-- audio -->
  <audio id="bgm" src="bg.wav" preload="auto" loop></audio>
  <audio id="errorSound" src="beep.wav" preload="auto"></audio>

  <script>
    const totalPopups = 18;
    let removedPopups = 0;
    let popupTimer;
    let alertTimer;

    window.onload = function () {
      //startPopupTimer();
      //startAlertTimer();
      updateProgressBar();
      openSeveralPopups(totalPopups);
      document.body.addEventListener('click', startBgm, { once: true });
    };

    /*function startPopupTimer() {
      popupTimer = setTimeout(openRandomPopup, 8000);
    }*/

    function openSeveralPopups(numPopups) {
      for (i = 1; i < numPopups + 1; i++) {
        var popupId = "popupOverlay" + i;
        openPopup(popupId);
      }
    }

    function openPopup(popupId) {
      const popup = document.getElementById(popupId);
      popup.style.display = "flex";
      popup.style.position = "fixed";

      const errorPopups = ['popupOverlay2','popupOverlay3','popupOverlay5','popupOverlay6'];
      if (errorPopups.includes(popupId)) playErrorSound();
      var randX = ((Math.random() * 2 - 1) * window.innerWidth * 0.35);
      var randY = ((Math.random() * 2 - 1) * window.innerHeight * 0.2);
      popup.style.left = `${randX}px`;
      popup.style.top = `${randY}px`;
    }
    function closePopup(popupId) {
      document.getElementById(popupId).style.display = "none";
      removedPopups++;
      if (removedPopups == totalPopups) {
        showAlert();
      }
      updateProgressBar();
      //startPopupTimer(); 
    }
    function showAlert() {
      document.getElementById("alertBanner").style.display = "block";
    }
    function closeAlert() {
      document.getElementById("alertBanner").style.display = "none";
      startAlertTimer(); 
    }

    function updateProgressBar() {
      const progressBar = document.getElementById('progressBar');
      const percent = (removedPopups / totalPopups) * 100;
      progressBar.style.width = `${percent}%`;
    }
    function startBgm() {
      const bgm = document.getElementById('bgm');
      if (bgm && bgm.paused) {
        bgm.play().catch(() => {});
      }
    }
    function playErrorSound() {
      const sfx = document.getElementById('errorSound');
      if (!sfx) return;
      sfx.currentTime = 0;
      sfx.play().catch(() => {});
    }

    document.addEventListener('keydown', function (event) {
      if (event.key === 'v' || event.key === 'V') openRandomPopup();
    });
  </script>
</body>
</html>
